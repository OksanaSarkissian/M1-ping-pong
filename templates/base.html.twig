<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="{{ asset('build/app.css') }}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>
      {% block title %}
        Welcome!
      {% endblock %}
    </title>
    <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>" />
    {# Run `composer require symfony/webpack-encore-bundle` to start using Symfony UX #}
    {% block stylesheets %}
      {{ encore_entry_link_tags('app') }}
    {% endblock %}

    {% block javascripts %}
      {{ encore_entry_script_tags('app') }}
    {% endblock %}
  </head>
  <body>
    <div class="container-fluid h-100">
      <div class="row">
        {% include './ui/sidebar.html.twig' %}
        <div class="col-sm p-3 min-vh-100">
          {% block body %}

          {% endblock %}
        </div>
      </div>
    </div>

    <script type="text/javascript" defer>
      console.log($('#piece_type')[0])
      $('#piece_type').on('change', function () {
        if ($(this).val() == 'Livrable') {
          $('#piece_gamme').parent().show()
          $('#piece_gamme').attr('data-error', 'This field is required.')
        } else {
          $('#piece_gamme').parent().hide()
          $('#piece_gamme').removeAttr('data-error')
        }
      })
      
      $('#realisation_machine_id_reel').parent().hide()
      $('#realisation_poste_id_reel').on('change', function () {
        if ($(this).val() !== '') {
          $('#realisation_machine_id_reel').parent().show()
          $('#realisation_machine_id_reel').attr('required', '')
          $('#realisation_machine_id_reel').attr('data-error', 'This field is required.')
        } else {
          $('#realisation_machine_id_reel').parent().hide()
          $('#realisation_machine_id_reel').removeAttr('data-error')
          $('#realisation_machine_id_reel').removeAttr('required')
        }
      })
    </script>
  </body>
</html>
